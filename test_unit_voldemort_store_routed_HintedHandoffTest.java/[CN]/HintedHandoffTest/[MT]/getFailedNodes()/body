{
  Set<Integer> failedNodes=new CopyOnWriteArraySet<Integer>();
  Random rand=new Random();
  for (int i=0; i < NUM_NODES_FAILED; i++) {
    int n=rand.nextInt(NUM_NODES_TOTAL);
    failedNodes.add(n);
  }
  for (  int node : failedNodes) {
    ForceFailStore<ByteArray,byte[],byte[]> forceFailStore=getForceFailStore(node);
    forceFailStore.setFail(true);
    if (logger.isTraceEnabled())     logger.trace("Started failing requests to " + node);
  }
  return failedNodes;
}
