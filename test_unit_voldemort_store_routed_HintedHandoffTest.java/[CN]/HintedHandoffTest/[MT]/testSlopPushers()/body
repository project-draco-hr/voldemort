{
  Set<Integer> failedNodes=getFailedNodes();
  Set<ByteArray> failedKeys=populateStore(failedNodes);
  reviveNodes(failedNodes);
  for (int i=0; i < 5; i++) {
    for (    SlopPusherJob job : slopPusherJobs) {
      if (logger.isTraceEnabled())       logger.trace("Started slop pusher job " + job);
      job.run();
      if (logger.isTraceEnabled())       logger.trace("Finished slop pusher job " + job);
    }
  }
  for (  ByteArray key : failedKeys) {
    List<Versioned<byte[]>> values=store.get(key);
    assertTrue("slop entry should be pushed for " + key + ", preflist "+ keysToNodes.get(key),values.size() > 0);
    assertEquals("slop entry should be correct for " + key,keyValues.get(key),new ByteArray(values.get(0).getValue()));
  }
}
