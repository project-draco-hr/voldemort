{
  Set<Integer> failedNodes=getFailedNodes();
  Multimap<Integer,ByteArray> failedKeys=populateStore(failedNodes);
  reviveNodes(failedNodes);
  for (int i=0; i < 5; i++) {
    for (    BlockingSlopPusherJob job : slopPusherJobs) {
      if (logger.isTraceEnabled())       logger.trace("Started slop pusher job " + job);
      job.run();
      if (logger.isTraceEnabled())       logger.trace("Finished slop pusher job " + job);
    }
  }
  for (  Map.Entry<Integer,ByteArray> entry : failedKeys.entries()) {
    List<Versioned<byte[]>> values=store.get(entry.getValue(),null);
    assertTrue("slop entry should be pushed for " + entry.getValue() + ", preflist "+ keysToNodes.get(entry.getValue()),values.size() > 0);
    assertEquals("slop entry should be correct for " + entry.getValue(),keyValues.get(entry.getValue()),new ByteArray(values.get(0).getValue()));
  }
}
