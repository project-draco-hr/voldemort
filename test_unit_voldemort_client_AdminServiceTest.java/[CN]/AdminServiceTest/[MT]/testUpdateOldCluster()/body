{
  Cluster cluster=server.getVoldemortMetadata().getCurrentCluster();
  ArrayList<Integer> partitionList=new ArrayList<Integer>();
  partitionList.add(4);
  partitionList.add(5);
  ArrayList<Node> nodes=new ArrayList<Node>(cluster.getNodes());
  nodes.add(new Node(3,"localhost",8883,6668,7778,partitionList));
  Cluster updatedCluster=new Cluster("new-cluster",nodes);
  AdminClient client=new AdminClient(server.getIdentityNode(),server.getVoldemortMetadata(),new SocketPool(100,100,2000,1000,10000));
  client.updateClusterMetadata(server.getIdentityNode().getId(),updatedCluster,MetadataStore.ROLLBACK_CLUSTER_KEY);
  Cluster metaCluster=server.getVoldemortMetadata().getRollbackCluster();
  assertEquals("Cluster should match",updatedCluster,metaCluster);
}
