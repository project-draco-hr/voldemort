{
  Cluster cluster=server.getVoldemortMetadata().getCurrentCluster();
  ArrayList<Node> nodes=new ArrayList<Node>(cluster.getNodes());
  nodes.add(new Node(3,"localhost",8883,6668,ImmutableList.of(4,5)));
  Cluster updatedCluster=new Cluster("new-cluster",nodes);
  AdminClientRequestFormat client=getAdminClient();
  client.updateClusterMetadata(server.getIdentityNode().getId(),updatedCluster,MetadataStore.CLUSTER_KEY);
  assertEquals("Cluster should match",updatedCluster,server.getVoldemortMetadata().getCurrentCluster());
}
