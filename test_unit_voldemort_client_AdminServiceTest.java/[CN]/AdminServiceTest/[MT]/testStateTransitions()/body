{
  AdminClient client=new AdminClient(server.getIdentityNode(),server.getVoldemortMetadata(),new SocketPool(100,100,2000,1000,10000));
  client.changeServerState(server.getIdentityNode().getId(),VoldemortMetadata.ServerState.REBALANCING_STEALER_STATE);
  VoldemortMetadata.ServerState state=server.getVoldemortMetadata().getServerState();
  assertEquals("State should be changed correctly to rebalancing state",VoldemortMetadata.ServerState.REBALANCING_STEALER_STATE,state);
  client.changeServerState(server.getIdentityNode().getId(),VoldemortMetadata.ServerState.NORMAL_STATE);
  state=server.getVoldemortMetadata().getServerState();
  assertEquals("State should be changed correctly to rebalancing state",VoldemortMetadata.ServerState.NORMAL_STATE,state);
  client.changeServerState(server.getIdentityNode().getId(),VoldemortMetadata.ServerState.REBALANCING_DONOR_STATE);
  state=server.getVoldemortMetadata().getServerState();
  assertEquals("State should be changed correctly to rebalancing state",VoldemortMetadata.ServerState.REBALANCING_DONOR_STATE,state);
}
