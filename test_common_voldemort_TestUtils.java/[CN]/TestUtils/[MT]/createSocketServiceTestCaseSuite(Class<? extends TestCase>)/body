{
  TestSuite testSuite=new TestSuite();
  for (  boolean useNio : new boolean[]{true,false}) {
    for (    Method method : testCaseClass.getMethods()) {
      if (!isTestMethod(method))       continue;
      Test test=TestSuite.createTest(testCaseClass,method.getName());
      ((SocketServiceTestCase)test).setUseNio(useNio);
      testSuite.addTest(test);
    }
  }
  return testSuite;
}
