{
  SocketChannel socketChannel=SocketChannel.open();
  socketChannel.socket().setReceiveBufferSize(this.socketBufferSize);
  socketChannel.socket().setSendBufferSize(this.socketBufferSize);
  socketChannel.socket().setTcpNoDelay(true);
  socketChannel.socket().setSoTimeout(soTimeoutMs);
  socketChannel.socket().setKeepAlive(this.socketKeepAlive);
  socketChannel.configureBlocking(false);
  socketChannel.connect(new InetSocketAddress(dest.getHost(),dest.getPort()));
  while (!socketChannel.finishConnect()) {
    if (logger.isEnabledFor(Level.WARN))     logger.warn("Still connecting to " + dest);
  }
  int numCreated=created.incrementAndGet();
  logger.debug("Created socket " + numCreated + " for "+ dest.getHost()+ ":"+ dest.getPort()+ " using protocol "+ dest.getRequestFormatType().getCode());
  int sendBufferSize=socketChannel.socket().getSendBufferSize();
  int receiveBufferSize=socketChannel.socket().getReceiveBufferSize();
  if (receiveBufferSize != this.socketBufferSize)   logger.debug("Requested socket receive buffer size was " + this.socketBufferSize + " bytes but actual size is "+ receiveBufferSize+ " bytes.");
  if (sendBufferSize != this.socketBufferSize)   logger.debug("Requested socket send buffer size was " + this.socketBufferSize + " bytes but actual size is "+ sendBufferSize+ " bytes.");
  ClientRequestExecutor clientRequestExecutor=new ClientRequestExecutor(socketChannel,this.socketBufferSize,dest.getRequestFormatType());
  BlockingClientRequest<String> clientRequest=new BlockingClientRequest<String>(new ProtocolNegotiatorClientRequest(dest.getRequestFormatType()));
  clientRequestExecutor.setClientRequest(clientRequest);
  clientRequest.write(new DataOutputStream(clientRequestExecutor.getOutputStream()));
  selectorManager.request(clientRequestExecutor);
  clientRequest.await();
  clientRequest.getResult();
  return clientRequestExecutor;
}
