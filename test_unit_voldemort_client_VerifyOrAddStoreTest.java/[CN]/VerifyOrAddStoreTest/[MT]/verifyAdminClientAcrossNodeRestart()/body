{
  adminClient.storeMgmtOps.verifyOrAddStore(newStoreDef,PROCESS_NAME);
  final int NODE_ID=servers.length - 1;
  ServerTestUtils.stopVoldemortServer(servers[NODE_ID]);
  try {
    retrieveStoreOnNode(newStoreName,NODE_ID);
    Assert.fail("Downed node retrieval should have thrown an error");
  }
 catch (  VoldemortException ex) {
  }
  try {
    adminClient.storeMgmtOps.verifyOrAddStore(newStoreDef,PROCESS_NAME);
    Assert.fail("Downed node should have thrown an error");
  }
 catch (  VoldemortException ex) {
  }
  servers[NODE_ID]=ServerTestUtils.restartServer(servers[NODE_ID],NODE_ID,cluster);
  StoreDefinition retrieved=retrieveStoreOnNode(newStoreName,NODE_ID);
  assertEquals("After restart, should retrieve the store",newStoreDef,retrieved);
  adminClient.storeMgmtOps.verifyOrAddStore(newStoreDef,PROCESS_NAME);
}
