{
  ResourcePoolConfig config=new ResourcePoolConfig().setIsFair(true).setMaxPoolSize(maxConnectionsPerNode).setMaxInvalidAttempts(maxConnectionsPerNode).setTimeout(connectionTimeoutMs,TimeUnit.MILLISECONDS);
  this.factory=new ClientRequestExecutorFactory(selectors,connectionTimeoutMs,soTimeoutMs,socketBufferSize,socketKeepAlive);
  this.pool=new KeyedResourcePool<SocketDestination,ClientRequestExecutor>(factory,config);
  this.stats=new ClientSocketStats(pool);
  ((ClientRequestExecutorFactory)factory).setStats(stats);
}
