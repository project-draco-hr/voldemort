{
  ByteUtils.writeShort(buf,(short)versions.size(),offset);
  offset+=ByteUtils.SIZE_OF_SHORT;
  byte versionSize=ByteUtils.numberOfBytesRequired(getMaxVersion());
  buf[offset]=versionSize;
  offset++;
  int clockEntrySize=ByteUtils.SIZE_OF_SHORT + versionSize;
  for (  ClockEntry v : versions) {
    ByteUtils.writeShort(buf,v.getNodeId(),offset);
    ByteUtils.writeBytes(buf,v.getVersion(),offset + ByteUtils.SIZE_OF_SHORT,versionSize);
    offset+=clockEntrySize;
  }
  ByteUtils.writeLong(buf,this.timestamp,offset);
  return sizeInBytes();
}
