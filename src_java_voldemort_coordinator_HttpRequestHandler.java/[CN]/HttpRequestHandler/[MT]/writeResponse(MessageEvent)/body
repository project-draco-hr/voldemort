{
  boolean keepAlive=isKeepAlive(request);
  HttpResponse response=new DefaultHttpResponse(HTTP_1_1,OK);
  response.setContent(this.responseContent);
  response.setHeader(CONTENT_TYPE,"application/pdf");
  if (keepAlive) {
    response.setHeader(CONTENT_LENGTH,response.getContent().readableBytes());
  }
  String cookieString=request.getHeader(COOKIE);
  if (cookieString != null) {
    CookieDecoder cookieDecoder=new CookieDecoder();
    Set<Cookie> cookies=cookieDecoder.decode(cookieString);
    if (!cookies.isEmpty()) {
      CookieEncoder cookieEncoder=new CookieEncoder(true);
      for (      Cookie cookie : cookies) {
        cookieEncoder.addCookie(cookie);
      }
      response.addHeader(SET_COOKIE,cookieEncoder.encode());
    }
  }
  ChannelFuture future=e.getChannel().write(response);
  if (!keepAlive) {
    future.addListener(ChannelFutureListener.CLOSE);
  }
}
