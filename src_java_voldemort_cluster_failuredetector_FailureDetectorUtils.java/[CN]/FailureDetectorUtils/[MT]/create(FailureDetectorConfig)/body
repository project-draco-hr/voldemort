{
  Class<?> clazz=ReflectUtils.loadClass(failureDetectorConfig.getImplementationClassName());
  FailureDetector fd=(FailureDetector)ReflectUtils.callConstructor(clazz,new Class[]{FailureDetectorConfig.class},new Object[]{failureDetectorConfig});
  if (failureDetectorConfig.isJmxEnabled()) {
    MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
    ObjectName name=JmxUtils.createObjectName(JmxUtils.getPackageName(fd.getClass()),fd.getClass().getSimpleName());
    if (mbeanServer.isRegistered(name))     JmxUtils.unregisterMbean(mbeanServer,name);
    JmxUtils.registerMbean(mbeanServer,JmxUtils.createModelMBean(fd),name);
  }
  return fd;
}
