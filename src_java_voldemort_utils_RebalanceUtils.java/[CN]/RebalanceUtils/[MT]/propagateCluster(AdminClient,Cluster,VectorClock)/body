{
  AtomicInteger failures=new AtomicInteger(0);
  for (  Node node : currentCluster.getNodes()) {
    try {
      adminClient.updateRemoteCluster(node.getId(),currentCluster,clock);
    }
 catch (    VoldemortException e) {
      logger.warn("Failed to copy new cluster.xml(" + currentCluster + ") to remote node:"+ node,e);
      failures.incrementAndGet();
    }
  }
  if (failures.get() == currentCluster.getNumberOfNodes())   throw new VoldemortException("Failed to propagate new cluster.xml(" + currentCluster + ") to any node");
}
