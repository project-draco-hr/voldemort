{
  List<Version> versions=getVersions(key);
  Versioned<V> versioned;
  if (versions.isEmpty())   versioned=Versioned.value(value,new VectorClock());
 else   if (versions.size() == 1)   versioned=Versioned.value(value,versions.get(0));
 else {
    versioned=get(key,null);
    if (versioned == null)     versioned=Versioned.value(value,new VectorClock());
 else     versioned.setObject(value);
  }
  return put(key,versioned);
}
