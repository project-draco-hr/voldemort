{
  ChannelPipeline pipeline=pipeline();
  pipeline.addLast("decoder",new HttpRequestDecoder());
  pipeline.addLast("aggregator",new HttpChunkAggregator(1048576));
  pipeline.addLast("encoder",new HttpResponseEncoder());
  pipeline.addLast("deflater",new HttpContentCompressor());
  if (this.noop) {
    pipeline.addLast("handler",new NoopHttpRequestHandler(null));
  }
 else {
    pipeline.addLast("handler",new HttpRequestHandler(storeClient));
  }
  return pipeline;
}
