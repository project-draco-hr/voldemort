{
  if (response.getValue() instanceof Exception) {
    if (!handleError(pipeline,response))     return;
  }
 else {
    for (    ByteArray key : response.getKey()) {
      MutableInt successCount=pipelineData.getSuccessCount(key);
      successCount.increment();
      List<Versioned<byte[]>> retrieved=response.getValue().get(key);
      if (retrieved != null) {
        List<Versioned<byte[]>> existing=pipelineData.getResult().get(key);
        if (existing == null)         pipelineData.getResult().put(key,Lists.newArrayList(retrieved));
 else         existing.addAll(retrieved);
      }
    }
    pipelineData.getResponses().add(response);
    failureDetector.recordSuccess(response.getNode(),response.getRequestTime());
  }
  if (pipelineData.getCompleted() == pipelineData.getAttempts())   pipeline.addEvent(completeEvent);
}
