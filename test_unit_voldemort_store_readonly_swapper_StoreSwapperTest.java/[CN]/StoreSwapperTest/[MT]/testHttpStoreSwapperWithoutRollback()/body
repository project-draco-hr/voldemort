{
  ExecutorService executor=Executors.newCachedThreadPool();
  try {
    HttpConnectionManager manager=new MultiThreadedHttpConnectionManager();
    manager.getParams().setMaxTotalConnections(10);
    manager.getParams().setMaxConnectionsPerHost(HostConfiguration.ANY_HOST_CONFIGURATION,10);
    HttpClient client=new HttpClient(manager);
    StoreSwapper swapper=new HttpStoreSwapper(cluster,executor,client,"read-only/mgmt",false,false);
    testFetchSwapWithoutRollback(swapper);
  }
  finally {
    executor.shutdown();
  }
}
