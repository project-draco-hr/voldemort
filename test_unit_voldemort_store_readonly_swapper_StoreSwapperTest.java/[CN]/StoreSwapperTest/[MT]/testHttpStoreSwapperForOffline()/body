{
  ExecutorService executor=Executors.newCachedThreadPool();
  DefaultHttpClient client=null;
  try {
    ThreadSafeClientConnManager connectionManager=new ThreadSafeClientConnManager();
    connectionManager.setMaxTotal(10);
    connectionManager.setDefaultMaxPerRoute(10);
    client=new DefaultHttpClient(connectionManager);
    StoreSwapper swapper=new HttpStoreSwapper(cluster,executor,client,"read-only/mgmt",true,true);
    adminClient.metadataMgmtOps.setRemoteOfflineState(0,true);
    testFetchSwap(swapper);
    fail("RO Fetcher should fail on offline state.");
  }
 catch (  Exception e) {
  }
 finally {
    executor.shutdown();
    VoldemortIOUtils.closeQuietly(client);
  }
}
