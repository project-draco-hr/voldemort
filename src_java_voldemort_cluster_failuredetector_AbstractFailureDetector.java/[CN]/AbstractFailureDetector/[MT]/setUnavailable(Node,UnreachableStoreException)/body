{
  NodeStatus nodeStatus=getNodeStatus(node);
  if (logger.isEnabledFor(Level.WARN)) {
    if (e != null)     logger.warn(node + " set as unavailable",e);
 else     logger.warn(node + " set as unavailable");
  }
synchronized (nodeStatus) {
    boolean previouslyAvailable=nodeStatus.isAvailable();
    nodeStatus.setAvailable(false);
    if (previouslyAvailable)     notifyUnavailable(node);
  }
}
