{
  List<Integer> nodeIds=Lists.newArrayList();
  VectorClock updatedVersion=null;
  for (  Node node : nodes) {
    nodeIds.add(node.getId());
    if (updatedVersion == null) {
      updatedVersion=(VectorClock)adminClient.metadataMgmtOps.getRemoteMetadata(node.getId(),metaKey).getVersion();
    }
 else {
      updatedVersion=updatedVersion.merge((VectorClock)adminClient.metadataMgmtOps.getRemoteMetadata(node.getId(),metaKey).getVersion());
    }
    updatedVersion=updatedVersion.incremented(nodeIds.get(0),System.currentTimeMillis());
  }
  adminClient.metadataMgmtOps.updateRemoteMetadata(nodeIds,metaKey,Versioned.value(metaValue.toString(),updatedVersion));
}
