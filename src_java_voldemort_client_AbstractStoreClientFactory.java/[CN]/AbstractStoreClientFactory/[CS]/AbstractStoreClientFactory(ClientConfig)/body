{
  this.config=config;
  this.threadPool=new ClientThreadPool(config.getMaxThreads(),config.getThreadIdleTime(TimeUnit.MILLISECONDS),config.getMaxQueuedRequests());
  this.serializerFactory=config.getSerializerFactory();
  this.bootstrapUrls=validateUrls(config.getBootstrapUrls());
  this.isJmxEnabled=config.isJmxEnabled();
  this.requestFormatType=config.getRequestFormatType();
  this.jmxId=getNextJmxId();
  this.maxBootstrapRetries=config.getMaxBootstrapRetries();
  this.stats=new StoreStats();
  this.clientZoneId=config.getClientZoneId();
  this.clientContextName=(null == config.getClientContextName() ? "" : config.getClientContextName());
  this.routedStoreFactory=new RoutedStoreFactory(config.isPipelineRoutedStoreEnabled(),threadPool,config.getTimeoutConfig());
  this.sequencer=new AtomicInteger(0);
  this.clientAsyncServiceRepo=new HashSet<SchedulerService>();
  if (this.isJmxEnabled) {
    JmxUtils.registerMbean(threadPool,JmxUtils.createObjectName(JmxUtils.getPackageName(threadPool.getClass()),JmxUtils.getClassName(threadPool.getClass()) + "." + clientContextName+ jmxId()));
    JmxUtils.registerMbean(new StoreStatsJmx(stats),JmxUtils.createObjectName("voldemort.store.stats.aggregate",clientContextName + ".aggregate-perf" + jmxId()));
  }
}
