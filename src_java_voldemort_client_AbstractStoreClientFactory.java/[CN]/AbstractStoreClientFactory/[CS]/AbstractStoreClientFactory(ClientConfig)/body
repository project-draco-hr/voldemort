{
  this.config=config;
  this.threadPool=new ClientThreadPool(config.getMaxThreads(),config.getThreadIdleTime(TimeUnit.MILLISECONDS),config.getMaxQueuedRequests());
  this.serializerFactory=config.getSerializerFactory();
  this.bootstrapUrls=validateUrls(config.getBootstrapUrls());
  this.isJmxEnabled=config.isJmxEnabled();
  this.requestFormatType=config.getRequestFormatType();
  this.jmxId=jmxIdCounter.getAndIncrement();
  this.maxBootstrapRetries=config.getMaxBootstrapRetries();
  this.stats=new StoreStats();
  this.clientZoneId=config.getClientZoneId();
  this.routedStoreFactory=new RoutedStoreFactory(config.isPipelineRoutedStoreEnabled(),threadPool,config.getTimeoutConfig());
  if (this.isJmxEnabled) {
    JmxUtils.registerMbean(threadPool,JmxUtils.createObjectName(JmxUtils.getPackageName(threadPool.getClass()),JmxUtils.getClassName(threadPool.getClass()) + JmxUtils.getJmxId(jmxId)));
    JmxUtils.registerMbean(new StoreStatsJmx(stats),JmxUtils.createObjectName("voldemort.store.stats.aggregate","aggregate-perf" + JmxUtils.getJmxId(jmxId)));
  }
}
