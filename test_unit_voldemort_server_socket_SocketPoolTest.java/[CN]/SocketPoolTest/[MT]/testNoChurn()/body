{
  ExecutorService service=Executors.newFixedThreadPool(10);
  int numRequests=1000;
  final CountDownLatch latch=new CountDownLatch(numRequests);
  for (int i=0; i < numRequests; i++) {
    service.execute(new Runnable(){
      public void run(){
        SocketAndStreams sas=pool.checkout(dest);
        pool.checkin(dest,sas);
        latch.countDown();
      }
    }
);
  }
  latch.await();
  assertEquals(maxConnections,pool.getNumberSocketsCreated());
}
