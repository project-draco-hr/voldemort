{
  VectorClock clock=(VectorClock)version;
  int clockSize=clock == null ? 0 : clock.sizeInBytes();
  byte[] keyBytes=new byte[2 + key.length + clockSize];
  ByteUtils.writeShort(keyBytes,(short)key.length,0);
  System.arraycopy(key,0,keyBytes,2,key.length);
  if (clock != null)   System.arraycopy(clock.toBytes(),0,keyBytes,key.length + 2,clockSize);
  return keyBytes;
}
