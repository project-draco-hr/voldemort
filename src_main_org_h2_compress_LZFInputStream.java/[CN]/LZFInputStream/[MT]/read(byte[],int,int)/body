{
  if (len == 0) {
    return 0;
  }
  int read=0;
  while (len > 0) {
    int r=readBlock(b,off,len);
    if (r < 0) {
      break;
    }
    read+=r;
    off+=r;
    len-=r;
  }
  return read == 0 ? -1 : read;
}
