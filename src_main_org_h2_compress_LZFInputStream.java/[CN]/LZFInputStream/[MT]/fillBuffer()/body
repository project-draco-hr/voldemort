{
  if (buffer != null && pos < bufferLength) {
    return;
  }
  int len=readInt();
  if (decompress == null) {
    this.bufferLength=0;
  }
 else   if (len < 0) {
    len=-len;
    buffer=ensureSize(buffer,len);
    readFully(buffer,len);
    this.bufferLength=len;
  }
 else {
    inBuffer=ensureSize(inBuffer,len);
    int size=readInt();
    readFully(inBuffer,len);
    buffer=ensureSize(buffer,size);
    decompress.expand(inBuffer,0,len,buffer,0,size);
    this.bufferLength=size;
  }
  pos=0;
}
