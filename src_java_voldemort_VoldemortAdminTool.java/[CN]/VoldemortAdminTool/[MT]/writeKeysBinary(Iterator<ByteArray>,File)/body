{
  DataOutputStream dos=null;
  FileOutputStream outputStream=null;
  if (outputFile != null) {
    outputStream=new FileOutputStream(outputFile);
    dos=new DataOutputStream(new BufferedOutputStream(outputStream));
  }
 else {
    dos=new DataOutputStream(new BufferedOutputStream(System.out));
  }
  try {
    while (keyIterator.hasNext()) {
      byte[] keyBytes=keyIterator.next().get();
      dos.writeInt(keyBytes.length);
      dos.write(keyBytes);
    }
  }
  finally {
    if (outputStream != null) {
      outputStream.close();
    }
    dos.close();
  }
}
