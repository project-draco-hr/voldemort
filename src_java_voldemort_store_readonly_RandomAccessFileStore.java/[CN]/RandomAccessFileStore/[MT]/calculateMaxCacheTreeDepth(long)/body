{
  if (maxCacheSizeBytes / MEMORY_OVERHEAD_PER_KEY > Integer.MAX_VALUE)   throw new IllegalArgumentException("Maximum cache size is " + Integer.MAX_VALUE * MEMORY_OVERHEAD_PER_KEY + " bytes.");
  int cacheElements=(int)(maxCacheSizeBytes / MEMORY_OVERHEAD_PER_KEY);
  return (int)floor(log(cacheElements) / log(2));
}
