{
  String[] path=SLASH_PATTERN.split(request.getPathInfo());
  ByteArray key=getKey(path);
  String storeName=getStoreName(path);
  Store<ByteArray,byte[]> store=getStore(storeName);
  int size=request.getContentLength();
  byte[] contents=new byte[size];
  ByteUtils.read(request.getInputStream(),contents);
  try {
    VectorClock clock=new VectorClock(Base64.decodeBase64(request.getHeader(VERSION_EXTENSION).getBytes()));
    store.put(key,new Versioned<byte[]>(contents,clock));
  }
 catch (  VoldemortException v) {
    HttpResponseCodeErrorMapper.ResponseCode code=httpResponseCodeErrorMapper.mapErrorToResponseCode(v);
    response.setContentType("text/xml");
    response.sendError(code.getCode(),errorXml(v,code.getText()));
  }
}
