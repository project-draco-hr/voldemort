{
  String[] path=SLASH_PATTERN.split(request.getPathInfo());
  Pair<ByteArray,String> keyAndStore=getKeyAndStore(path);
  Store<ByteArray,byte[]> store=getStore(keyAndStore.getSecond());
  DataOutputStream stream=new DataOutputStream(response.getOutputStream());
  try {
    List<Versioned<byte[]>> values=store.get(keyAndStore.getFirst());
    for (    Versioned<byte[]> versioned : values) {
      byte[] clock=((VectorClock)versioned.getVersion()).toBytes();
      byte[] value=versioned.getValue();
      stream.writeInt(clock.length + value.length);
      stream.write(clock);
      stream.write(value);
    }
  }
 catch (  VoldemortException v) {
    HttpResponseCodeErrorMapper.ResponseCode code=httpResponseCodeErrorMapper.mapErrorToResponseCode(v);
    response.setContentType("text/xml");
    response.sendError(code.getCode(),errorXml(v,code.getText()));
  }
}
