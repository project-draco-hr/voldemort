{
  HashMap<Integer,List<Integer>> replicaToPartitionList=Maps.newHashMap();
  replicaToPartitionList.put(0,Lists.newArrayList(0,1,2));
  HashMap<Integer,List<Integer>> replicaToPartitionList2=Maps.newHashMap();
  replicaToPartitionList2.put(1,Lists.newArrayList(3,4));
  replicaToPartitionList2.put(3,Lists.newArrayList(5,6));
  HashMap<String,HashMap<Integer,List<Integer>>> storeToReplicaToAddPartitionList=Maps.newHashMap();
  storeToReplicaToAddPartitionList.put("test1",replicaToPartitionList);
  storeToReplicaToAddPartitionList.put("test2",replicaToPartitionList2);
  HashMap<String,HashMap<Integer,List<Integer>>> storeToReplicaToDeletePartitionList=Maps.newHashMap();
  storeToReplicaToDeletePartitionList.put("test2",replicaToPartitionList);
  List<RebalancePartitionsInfo> rebalancePartitionsInfos=Arrays.asList(new RebalancePartitionsInfo(2,0,storeToReplicaToAddPartitionList,storeToReplicaToDeletePartitionList,ServerTestUtils.getLocalCluster(1),0),new RebalancePartitionsInfo(3,1,storeToReplicaToDeletePartitionList,storeToReplicaToDeletePartitionList,ServerTestUtils.getLocalCluster(2),10));
  RebalancerState in=new RebalancerState(rebalancePartitionsInfos);
  String jsonIn=in.toJsonString();
  RebalancerState out=RebalancerState.create(jsonIn);
  assertEquals(in,out);
  String jsonOut=out.toJsonString();
  assertEquals(jsonIn,jsonOut);
}
