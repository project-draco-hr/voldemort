{
  if (verbose) {
    System.out.println("Performing consistency fix of key: " + keyInHexFormat);
  }
  byte[] keyInBytes;
  List<Integer> nodeIdList=null;
  int masterPartitionId=-1;
  try {
    keyInBytes=ByteUtils.fromHexString(keyInHexFormat);
    masterPartitionId=vInstance.getMasterPartitionId(keyInHexFormat);
    nodeIdList=vInstance.getStoreInstance().getReplicationNodeList(masterPartitionId);
  }
 catch (  Exception exception) {
    if (verbose) {
      System.out.println("Aborting fixKey due to bad init.");
      exception.printStackTrace();
    }
    return FixKeyResult.BAD_INIT;
  }
  ByteArray keyAsByteArray=new ByteArray(keyInBytes);
  Map<Integer,QueryKeyResult> nodeIdToKeyValues=new HashMap<Integer,QueryKeyResult>();
  FixKeyResult fixKeyResult=ConsistencyFix.doRead(vInstance,nodeIdList,keyInBytes,keyInHexFormat,verbose,nodeIdToKeyValues);
  if (fixKeyResult != FixKeyResult.SUCCESS) {
    return fixKeyResult;
  }
  List<NodeValue<ByteArray,byte[]>> nodeValues=Lists.newArrayList();
  fixKeyResult=ConsistencyFix.processReadReplies(nodeIdList,keyAsByteArray,keyInHexFormat,verbose,nodeIdToKeyValues,nodeValues);
  if (fixKeyResult != FixKeyResult.SUCCESS) {
    return fixKeyResult;
  }
  List<NodeValue<ByteArray,byte[]>> toReadRepair=ConsistencyFix.resolveReadConflicts(verbose,nodeValues);
  fixKeyResult=ConsistencyFix.doWriteBack(vInstance,verbose,toReadRepair);
  if (fixKeyResult != FixKeyResult.SUCCESS) {
    return fixKeyResult;
  }
  if (verbose) {
    System.out.println("Fix for key " + keyInHexFormat + "completed successfully!!");
  }
  return FixKeyResult.SUCCESS;
}
