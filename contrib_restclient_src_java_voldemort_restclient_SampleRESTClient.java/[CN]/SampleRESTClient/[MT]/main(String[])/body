{
  RESTClientConfig config=new RESTClientConfig();
  config.setHttpBootstrapURL("http://localhost:8080").setTimeoutMs(1500,TimeUnit.MILLISECONDS).setMaxR2ConnectionPoolSize(100);
  RESTClientFactory factory=new RESTClientFactory(config);
  StoreClient<String,String> clientStore=factory.getStoreClient("test");
  try {
    System.out.println("First valid put");
    clientStore.put("a","Howdy!!!!");
    System.out.println("Second valid put");
    clientStore.put("b","Partner!!!!");
    Versioned<String> versionedValue=clientStore.get("a");
    System.out.println("Received response : " + versionedValue);
    Version obsoleteVersion=((VectorClock)versionedValue.getVersion()).clone();
    System.out.println("First versioned put");
    versionedValue.setObject("New Value !!!");
    System.err.println("************* original version : " + versionedValue.getVersion());
    Version putVersion=clientStore.put("a",versionedValue);
    System.err.println("************* Updated version : " + putVersion);
    System.out.println("Obsolete put");
    Versioned<String> obsoleteVersionedValue=new Versioned<String>("Obsolete value",obsoleteVersion);
    try {
      clientStore.put("a",obsoleteVersionedValue);
      System.err.println(" **************** Should not reach this point **************** ");
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
    versionedValue=clientStore.get("a");
    System.out.println("Received response on the versioned put: " + versionedValue);
    System.out.println("Versioned put based on the last put ");
    Versioned<String> newVersionedPut=new Versioned<String>("Yet another value !!!",putVersion);
    clientStore.put("a",newVersionedPut);
    versionedValue=clientStore.get("a");
    System.out.println("Received response on the (second) versioned put: " + versionedValue);
    List<String> keyList=new ArrayList<String>();
    keyList.add("a");
    keyList.add("b");
    System.out.println("Received response : " + clientStore.getAll(keyList));
  }
  finally {
    factory.close();
  }
}
