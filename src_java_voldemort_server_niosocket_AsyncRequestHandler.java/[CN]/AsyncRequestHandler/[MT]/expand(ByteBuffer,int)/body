{
  int currentCapacity=buffer.capacity();
  if (logger.isTraceEnabled()) {
    String direction=null;
    if (buffer == inputBuffer)     direction="reading";
 else     if (buffer == outputBuffer)     direction="writing";
    logger.trace("The buffer used for " + direction + " data for "+ socketChannel.socket().getRemoteSocketAddress()+ " requires we increase our internal buffer from "+ currentCapacity+ " to "+ newCapacity);
  }
  ByteBuffer newBuffer=ByteBuffer.allocateDirect(newCapacity);
  int position=buffer.position();
  buffer.rewind();
  newBuffer.put(buffer);
  newBuffer.position(position);
  return newBuffer;
}
