{
  this.sysStore=systemStore;
  if (initialVersion == null) {
    this.currentVersion=sysStore.getSysStore("stores.xml");
    if (currentVersion == null)     currentVersion=new Versioned<Long>((long)0);
  }
 else {
    currentVersion=initialVersion;
  }
  isRunning=true;
  Thread checkVersionThread=new Thread(this,"AsyncVersionCheckThread");
  checkVersionThread.setDaemon(true);
  checkVersionThread.setUncaughtExceptionHandler(new UncaughtExceptionHandler(){
    public void uncaughtException(    Thread t,    Throwable e){
      if (logger.isEnabledFor(Level.ERROR))       logger.error("Uncaught exception in Metadata Version check thread:",e);
    }
  }
);
  this.storeClientThunk=storeClientThunk;
  this.asyncMetadataCheckInterval=asyncMetadataCheckInterval;
  checkVersionThread.start();
}
