{
  ClusterGenerator clusterGenerator=new ClusterGenerator();
  List<ClusterNodeDescriptor> nodes=clusterGenerator.createClusterNodeDescriptors(new ArrayList<String>(hostNames.values()),3);
  String clusterXml=clusterGenerator.createClusterDescriptor("test",nodes);
  FileUtils.writeStringToFile(new File(path),clusterXml);
  Map<String,Integer> nodeIds=new HashMap<String,Integer>();
  for (  ClusterNodeDescriptor node : nodes) {
    String privateDnsName=node.getHostName();
    for (    Map.Entry<String,String> entry : hostNames.entrySet()) {
      if (entry.getValue().equals(privateDnsName)) {
        nodeIds.put(entry.getKey(),node.getId());
      }
    }
  }
  return nodeIds;
}
