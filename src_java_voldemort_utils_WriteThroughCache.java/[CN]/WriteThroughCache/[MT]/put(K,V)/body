{
synchronized (this) {
    V oldValue=this.get(key);
    try {
      this.put(key,value);
      writeBack(key,value);
      return oldValue;
    }
 catch (    Exception e) {
      this.put(key,oldValue);
      writeBack(key,oldValue);
      throw new VoldemortException("Failed to put(" + key + ", "+ value+ ") in write through cache",e);
    }
  }
}
