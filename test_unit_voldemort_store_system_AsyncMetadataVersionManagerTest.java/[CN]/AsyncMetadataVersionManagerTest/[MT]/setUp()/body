{
  cluster=ServerTestUtils.getLocalCluster(2,new int[][]{{0,1,2,3},{4,5,6,7}});
  servers=new VoldemortServer[2];
  servers[0]=ServerTestUtils.startVoldemortServer(socketStoreFactory,ServerTestUtils.createServerConfig(true,0,TestUtils.createTempDir().getAbsolutePath(),null,storesXmlfile,new Properties()),cluster);
  servers[1]=ServerTestUtils.startVoldemortServer(socketStoreFactory,ServerTestUtils.createServerConfig(true,1,TestUtils.createTempDir().getAbsolutePath(),null,storesXmlfile,new Properties()),cluster);
  socketUrl=servers[0].getIdentityNode().getSocketUrl().toString();
  bootStrapUrls=new String[1];
  bootStrapUrls[0]=socketUrl;
  sysVersionStore=new SystemStore<String,Long>(SystemStoreConstants.SystemStoreName.voldsys$_metadata_version.name(),bootStrapUrls,this.CLIENT_ZONE_ID);
  repository=new SystemStoreRepository();
  repository.addSystemStore(sysVersionStore,SystemStoreConstants.SystemStoreName.voldsys$_metadata_version.name());
  this.scheduler=new SchedulerService(2,SystemTime.INSTANCE,true);
}
