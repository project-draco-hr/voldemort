{
  final FailureDetectorConfig failureDetectorConfig=failureDetector.getConfig();
  final Node node=Iterables.get(failureDetectorConfig.getNodes(),0);
  Thread t=new Thread(new Runnable(){
    public void run(){
      try {
        updateNodeStoreAvailability(failureDetectorConfig,node,false);
        failureDetector.recordException(node,new UnreachableStoreException("This is part of the test",new SocketTimeoutException("This is part of the test")));
        time.sleep(unavailabilityMillis);
        updateNodeStoreAvailability(failureDetectorConfig,node,true);
        while (!failureDetector.isAvailable(node))         time.sleep(10);
        failureDetector.recordSuccess(node);
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
);
  t.start();
  t.join();
}
