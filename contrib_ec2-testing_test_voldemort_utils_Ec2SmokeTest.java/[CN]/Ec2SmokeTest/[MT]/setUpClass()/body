{
  Properties properties=getEc2Properties();
  accessId=properties.getProperty("ec2AccessId");
  secretKey=properties.getProperty("ec2SecretKey");
  ami=properties.getProperty("ec2Ami");
  keyPairId=properties.getProperty("ec2KeyPairId");
  sshPrivateKeyPath=properties.getProperty("ec2SshPrivateKeyPath");
  hostUserId=properties.getProperty("ec2HostUserId");
  sshPrivateKey=sshPrivateKeyPath != null ? new File(sshPrivateKeyPath) : null;
  voldemortRootDirectory=properties.getProperty("ec2VoldemortRootDirectory");
  voldemortHomeDirectory=properties.getProperty("ec2VoldemortHomeDirectory");
  sourceDirectory=new File(properties.getProperty("ec2SourceDirectory"));
  parentDirectory=properties.getProperty("ec2ParentDirectory");
  clusterXmlFile=new File(properties.getProperty("ec2ClusterXmlFile"));
  int ec2InstanceCount=Integer.parseInt(properties.getProperty("ec2InstanceCount"));
  hostNamePairs=listInstances(accessId,secretKey);
  if (hostNamePairs.isEmpty()) {
    createInstances(accessId,secretKey,ami,keyPairId,ec2InstanceCount);
    hostNamePairs=listInstances(accessId,secretKey);
    shouldTerminate=true;
  }
  hostNames=toHostNames(hostNamePairs);
  nodeIds=generateClusterDescriptor(hostNamePairs,"test",clusterXmlFile);
}
