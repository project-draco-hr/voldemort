{
  List<String> hostNames=new ArrayList<String>();
  for (  HostNamePair hostNamePair : hostNamePairs) {
    hostNames.add(hostNamePair.getExternalHostName());
  }
  ClusterGenerator clusterGenerator=new ClusterGenerator();
  List<ClusterNodeDescriptor> nodes=clusterGenerator.createClusterNodeDescriptors(hostNames,cluster);
  String clusterXml=clusterGenerator.createClusterDescriptor(cluster.getName(),nodes);
  FileUtils.writeStringToFile(remoteTestConfig.getClusterXmlFile(),clusterXml);
  Map<String,Integer> nodeIds=new HashMap<String,Integer>();
  for (  ClusterNodeDescriptor node : nodes) {
    nodeIds.put(node.getHostName(),node.getId());
  }
  return nodeIds;
}
