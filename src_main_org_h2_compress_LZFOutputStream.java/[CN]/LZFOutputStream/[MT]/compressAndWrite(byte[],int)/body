{
  if (len > 0) {
    ensureOutput(len);
    int compressed=compress.compress(buff,len,outBuffer,0);
    if (compressed > len) {
      writeInt(-len);
      out.write(buff,0,len);
    }
 else {
      writeInt(compressed);
      writeInt(len);
      out.write(outBuffer,0,compressed);
    }
  }
}
