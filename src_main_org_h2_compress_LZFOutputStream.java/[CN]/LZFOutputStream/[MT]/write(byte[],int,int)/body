{
  while (len > 0) {
    int copy=Math.min(buffer.length - pos,len);
    System.arraycopy(buff,off,buffer,pos,copy);
    pos+=copy;
    if (pos >= buffer.length) {
      flush();
    }
    off+=copy;
    len-=copy;
  }
}
