{
  super(config);
  ThreadSafeClientConnManager mgr=new ThreadSafeClientConnManager(SchemeRegistryFactory.createDefault(),config.getConnectionTimeout(TimeUnit.MILLISECONDS),TimeUnit.MILLISECONDS);
  mgr.setMaxTotal(config.getMaxTotalConnections());
  mgr.setDefaultMaxPerRoute(config.getMaxConnectionsPerNode());
  this.httpClient=new DefaultHttpClient(mgr);
  HttpParams clientParams=this.httpClient.getParams();
  clientParams.setParameter(CoreProtocolPNames.PROTOCOL_VERSION,HttpVersion.HTTP_1_1);
  HttpConnectionParams.setConnectionTimeout(clientParams,config.getConnectionTimeout(TimeUnit.MILLISECONDS));
  HttpConnectionParams.setSoTimeout(clientParams,config.getSocketTimeout(TimeUnit.MILLISECONDS));
  this.httpClient.setHttpRequestRetryHandler(new DefaultHttpRequestRetryHandler(0,false));
  HttpClientParams.setCookiePolicy(clientParams,CookiePolicy.IGNORE_COOKIES);
  clientParams.setParameter(CoreProtocolPNames.USER_AGENT,VOLDEMORT_USER_AGENT);
  HttpConnectionParams.setStaleCheckingEnabled(clientParams,false);
  this.reroute=config.getRoutingTier().equals(RoutingTier.SERVER);
  this.requestFormatFactory=new RequestFormatFactory();
}
