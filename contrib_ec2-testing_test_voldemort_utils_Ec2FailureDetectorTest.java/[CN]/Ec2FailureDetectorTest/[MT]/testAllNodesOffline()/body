{
  test(store);
  assertEquals(hostNamePairs.size(),failureDetector.getAvailableNodeCount());
  for (  Node n : failureDetector.getConfig().getNodes())   assertTrue(failureDetector.isAvailable(n));
  stopClusterQuiet(hostNames,ec2FailureDetectorTestConfig);
  test(store);
  assertEquals(0,failureDetector.getAvailableNodeCount());
  for (  Node n : failureDetector.getConfig().getNodes())   assertFalse(failureDetector.isAvailable(n));
  startClusterAsync(hostNames,ec2FailureDetectorTestConfig,nodeIds);
  for (  Node n : failureDetector.getConfig().getNodes())   failureDetector.waitForAvailability(n);
  test(store);
  assertEquals(hostNamePairs.size(),failureDetector.getAvailableNodeCount());
  for (  Node n : failureDetector.getConfig().getNodes())   assertTrue(failureDetector.isAvailable(n));
}
