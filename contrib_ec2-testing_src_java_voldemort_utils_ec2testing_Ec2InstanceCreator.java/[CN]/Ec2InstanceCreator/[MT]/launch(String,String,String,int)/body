{
  LaunchConfiguration launchConfiguration=new LaunchConfiguration(ami);
  launchConfiguration.setInstanceType(instanceSize == null ? InstanceType.DEFAULT : InstanceType.valueOf(instanceSize));
  launchConfiguration.setKeyName(keypairId);
  launchConfiguration.setMinCount(instanceCount);
  launchConfiguration.setMaxCount(instanceCount);
  ReservationDescription reservationDescription=ec2.runInstances(launchConfiguration);
  List<String> instanceIds=new ArrayList<String>();
  for (  ReservationDescription.Instance instance : reservationDescription.getInstances()) {
    if (logger.isInfoEnabled())     logger.info("Instance " + instance.getInstanceId() + " launched");
    instanceIds.add(instance.getInstanceId());
  }
  return instanceIds;
}
