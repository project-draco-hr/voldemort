{
  socketStoreFactory=new ClientRequestExecutorPool(2,10000,100000,32 * 1024);
  List<Node> nodes=Lists.newArrayList();
  int freePorts[]=ServerTestUtils.findFreePorts(3 * NUM_NODES);
  for (int i=0; i < NUM_NODES; i++) {
    nodes.add(new Node(i,"localhost",freePorts[3 * i],freePorts[3 * i + 1],freePorts[3 * i + 2],Lists.newArrayList(i,i + NUM_NODES)));
  }
  consistentRoutingCluster=new Cluster("consistent1",nodes);
  List<Node> nodes2=Lists.newArrayList();
  for (int i=0; i < NUM_NODES; i++) {
    List<Integer> partitions=Lists.newArrayList();
    if (i == 0)     partitions.add(i + NUM_NODES);
 else {
      partitions.add(i);
      partitions.add(i + NUM_NODES);
    }
    if (i == NUM_NODES - 1)     partitions.add(0);
    nodes2.add(new Node(i,"localhost",freePorts[3 * i],freePorts[3 * i + 1],freePorts[3 * i + 2],partitions));
  }
  consistentRoutingClusterModified=new Cluster("consistent2",nodes2);
  List<Zone> zones=ServerTestUtils.getZones(NUM_ZONES);
  List<Node> nodes3=Lists.newArrayList();
  for (int i=0; i < NUM_NODES; i++) {
    if (i < NUM_NODES / 2)     nodes3.add(new Node(i,"localhost",freePorts[3 * i],freePorts[3 * i + 1],freePorts[3 * i + 2],0,Lists.newArrayList(i,i + NUM_NODES)));
 else     nodes3.add(new Node(i,"localhost",freePorts[3 * i],freePorts[3 * i + 1],freePorts[3 * i + 2],1,Lists.newArrayList(i,i + NUM_NODES)));
  }
  zoneRoutingCluster=new Cluster("zone1",nodes3,zones);
  List<Node> nodes4=Lists.newArrayList();
  for (int i=0; i < NUM_NODES; i++) {
    List<Integer> partitions=Lists.newArrayList();
    if (i == 0)     partitions.add(i + NUM_NODES);
 else {
      partitions.add(i);
      partitions.add(i + NUM_NODES);
    }
    if (i == NUM_NODES - 1)     partitions.add(0);
    if (i < NUM_NODES / 2)     nodes4.add(new Node(i,"localhost",freePorts[3 * i],freePorts[3 * i + 1],freePorts[3 * i + 2],0,partitions));
 else     nodes4.add(new Node(i,"localhost",freePorts[3 * i],freePorts[3 * i + 1],freePorts[3 * i + 2],1,partitions));
  }
  zoneRoutingClusterModified=new Cluster("zone1",nodes4,zones);
  zoneReplicationFactors=Maps.newHashMap();
}
