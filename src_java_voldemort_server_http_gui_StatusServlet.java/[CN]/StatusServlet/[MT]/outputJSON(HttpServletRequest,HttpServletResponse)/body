{
  StringBuilder sb=new StringBuilder("{\n");
  sb.append("  \"requestURI\": \"");
  sb.append(request.getRequestURI());
  sb.append("\",");
  sb.append("\n  \"servertime\": \"");
  sb.append(new Date());
  sb.append("\",");
  sb.append("\n  \"server\": \"");
  sb.append(myMachine);
  sb.append("\",");
  sb.append("\n  \"uptime\": \"");
  sb.append(socketService.getStatusManager().getFormattedUptime());
  sb.append("\",");
  sb.append("\n  \"num_workers\": ");
  sb.append(socketService.getStatusManager().getActiveWorkersCount());
  sb.append(",");
  sb.append("\n  \"pool_size\": ");
  sb.append(socketService.getStatusManager().getWorkerPoolSize());
  sb.append(",");
  sb.append("\n  \"storestats\": {");
  for (  Store<ByteArray,byte[]> store : server.getStoreRepository().getAllLocalStores()) {
    if (store instanceof StatTrackingStore) {
      StatTrackingStore statStore=(StatTrackingStore)store;
      sb.append("\n    \"");
      sb.append(store.getName());
      sb.append("\" : {\n");
      sb.append("      \"num_get\": ");
      sb.append(statStore.getNumberOfCallsToGet());
      sb.append(",\n");
      sb.append("      \"ave_get_time\": ");
      sb.append(statStore.getAverageGetCompletionTimeInMs());
      sb.append(",\n");
      sb.append("      \"num_getall\": ");
      sb.append(statStore.getNumberOfCallsToGetAll());
      sb.append(",\n");
      sb.append("      \"ave_getall_time\": ");
      sb.append(statStore.getAverageGetAllCompletionTimeInMs());
      sb.append(",\n");
      sb.append("      \"num_put\": ");
      sb.append(statStore.getNumberOfCallsToPut());
      sb.append(",\n");
      sb.append("      \"ave_put_time\": ");
      sb.append(statStore.getAveragePutCompletionTimeInMs());
      sb.append(",\n");
      sb.append("      \"num_delete\": ");
      sb.append(statStore.getNumberOfCallsToDelete());
      sb.append(",\n");
      sb.append("      \"ave_delete_time\": ");
      sb.append(statStore.getAverageDeleteCompletionTimeInMs());
      sb.append(",\n");
      sb.append("    },");
    }
  }
  sb.append("  }\n");
  sb.append("}\n");
  try {
    OutputStreamWriter writer=new OutputStreamWriter(response.getOutputStream());
    writer.write(sb.toString());
    writer.flush();
  }
 catch (  Exception e) {
    throw new VoldemortException(e);
  }
}
