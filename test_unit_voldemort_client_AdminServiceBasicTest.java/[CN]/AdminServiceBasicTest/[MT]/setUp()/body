{
  cluster=ServerTestUtils.getLocalCluster(2,new int[][]{{0,1,2,3},{4,5,6,7}});
  servers=new VoldemortServer[2];
  storeDefs=new StoreDefinitionsMapper().readStoreList(new File(storesXmlfile));
  Properties serverProperties=new Properties();
  serverProperties.setProperty("client.max.connections.per.node","20");
  servers[0]=ServerTestUtils.startVoldemortServer(socketStoreFactory,ServerTestUtils.createServerConfig(useNio,0,TestUtils.createTempDir().getAbsolutePath(),null,storesXmlfile,serverProperties),cluster);
  servers[1]=ServerTestUtils.startVoldemortServer(socketStoreFactory,ServerTestUtils.createServerConfig(useNio,1,TestUtils.createTempDir().getAbsolutePath(),null,storesXmlfile,serverProperties),cluster);
  Properties adminProperties=new Properties();
  adminProperties.setProperty("max_connections","20");
  adminClient=new AdminClient(cluster,new AdminClientConfig(adminProperties));
}
