{
  VAdminProto.UpdateMetadataResponse.Builder response=VAdminProto.UpdateMetadataResponse.newBuilder();
  for (  KeyedVersions keyValue : request.getKeyValueList()) {
    try {
      ByteArray key=ProtoUtils.decodeBytes(keyValue.getKey());
      String keyString=ByteUtils.getString(key.get(),"UTF-8");
      if (MetadataStore.METADATA_KEYS.contains(keyString)) {
        Versioned<byte[]> versionedValue=ProtoUtils.decodeVersioned(keyValue.getVersions(0));
        logger.info("Updating metadata for key '" + keyString + "'");
        metadataStore.put(new ByteArray(ByteUtils.getBytes(keyString,"UTF-8")),versionedValue,null);
        logger.info("Successfully updated metadata for key '" + keyString + "'");
      }
    }
 catch (    VoldemortException e) {
      response.setError(ProtoUtils.encodeError(errorCodeMapper,e));
      logger.error("handleUpdateMetadata failed for request(" + request.toString() + ")",e);
    }
  }
  return response.build();
}
