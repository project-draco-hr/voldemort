{
  VAdminProto.UpdateMetadataResponse.Builder response=VAdminProto.UpdateMetadataResponse.newBuilder();
  try {
    ByteArray requestKey=ProtoUtils.decodeBytes(request.getKey());
    String keyString=ByteUtils.getString(requestKey.get(),"UTF-8");
    if (MetadataStore.METADATA_KEYS.contains(keyString)) {
      Versioned<byte[]> versionedValue=ProtoUtils.decodeVersioned(request.getVersioned());
      logger.info("Updating metadata for key '" + keyString + "'");
      ByteArray key=new ByteArray(ByteUtils.getBytes(keyString,"UTF-8"));
      metadataStore.validate(key,versionedValue,null);
      metadataStore.put(key,versionedValue,null);
      logger.info("Successfully updated metadata for key '" + keyString + "'");
    }
  }
 catch (  VoldemortException e) {
    response.setError(ProtoUtils.encodeError(errorCodeMapper,e));
    logger.error("handleUpdateMetadata failed for request(" + request.toString() + ")",e);
  }
  return response.build();
}
