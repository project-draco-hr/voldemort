{
  if (isPipelineRoutedStoreEnabled) {
    return new PipelineRoutedStore(storeDefinition.getName(),nodeStores,nonblockingStores,cluster,storeDefinition,repairReads,routingTimeoutMs,failureDetector);
  }
 else {
    return new ThreadPoolRoutedStore(storeDefinition.getName(),nodeStores,cluster,storeDefinition,repairReads,threadPool,routingTimeoutMs,failureDetector,SystemTime.INSTANCE);
  }
}
