{
  ThreadSafeClientConnManager connectionManager=new ThreadSafeClientConnManager(SchemeRegistryFactory.createDefault(),DEFAULT_CONNECTION_MANAGER_TIMEOUT,TimeUnit.MILLISECONDS);
  DefaultHttpClient httpClient=new DefaultHttpClient(connectionManager);
  HttpParams clientParams=httpClient.getParams();
  clientParams.setBooleanParameter(CoreConnectionPNames.TCP_NODELAY,false);
  clientParams.setIntParameter("http.socket.receivebuffer",60000);
  clientParams.setParameter(CoreProtocolPNames.USER_AGENT,VOLDEMORT_USER_AGENT);
  clientParams.setParameter(CoreProtocolPNames.PROTOCOL_VERSION,HttpVersion.HTTP_1_1);
  HttpConnectionParams.setConnectionTimeout(clientParams,DEFAULT_CONNECTION_MANAGER_TIMEOUT);
  HttpConnectionParams.setSoTimeout(clientParams,500);
  httpClient.setHttpRequestRetryHandler(new DefaultHttpRequestRetryHandler(0,false));
  HttpClientParams.setCookiePolicy(clientParams,CookiePolicy.IGNORE_COOKIES);
  connectionManager.setMaxTotal(DEFAULT_MAX_CONNECTIONS);
  connectionManager.setDefaultMaxPerRoute(DEFAULT_MAX_HOST_CONNECTIONS);
  HttpConnectionParams.setStaleCheckingEnabled(clientParams,false);
  return httpClient;
}
