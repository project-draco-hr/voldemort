{
  this.config=config;
  this.baseDirs=new ArrayList<File>();
  for (  String dir : config.getFsStorageDirs()) {
    File d=new File(dir);
    if (!d.exists())     d.mkdirs();
    if (!d.isDirectory() || !d.canRead() || !d.canWrite())     throw new IllegalStateException(d.getAbsolutePath() + " is not a directory that can be read from and written to.");
    baseDirs.add(d);
  }
}
