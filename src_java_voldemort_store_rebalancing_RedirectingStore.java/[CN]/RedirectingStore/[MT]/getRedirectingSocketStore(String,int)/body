{
  if (!storeRepository.hasRedirectingSocketStore(storeName,donorNodeId)) {
synchronized (storeRepository) {
      if (!storeRepository.hasRedirectingSocketStore(storeName,donorNodeId)) {
        Node donorNode=getNodeIfPresent(donorNodeId);
        logger.info("Creating new redirecting store for donor node " + donorNode.getId() + " and store "+ storeName);
        storeRepository.addRedirectingSocketStore(donorNode.getId(),storeFactory.create(storeName,donorNode.getHost(),donorNode.getSocketPort(),RequestFormatType.PROTOCOL_BUFFERS,RequestRoutingType.IGNORE_CHECKS));
      }
    }
  }
  return storeRepository.getRedirectingSocketStore(storeName,donorNodeId);
}
