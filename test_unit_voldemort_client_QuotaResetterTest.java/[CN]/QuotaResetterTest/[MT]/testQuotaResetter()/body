{
  adminClient.quotaMgmtOps.setQuotaForNode(STORE_NAME,QuotaType.GET_THROUGHPUT,0,1000L);
  assertEquals(Long.parseLong(adminClient.quotaMgmtOps.getQuotaForNode(STORE_NAME,QuotaType.GET_THROUGHPUT,0).getValue()),1000L);
  assertEquals(adminClient.quotaMgmtOps.getQuotaForNode(STORE_NAME,QuotaType.GET_THROUGHPUT,1),null);
  adminClient.metadataMgmtOps.updateRemoteMetadata(0,MetadataStore.QUOTA_ENFORCEMENT_ENABLED_KEY,Boolean.toString(true));
  adminClient.metadataMgmtOps.updateRemoteMetadata(1,MetadataStore.QUOTA_ENFORCEMENT_ENABLED_KEY,Boolean.toString(false));
  assertEquals(adminClient.metadataMgmtOps.getRemoteMetadata(0,MetadataStore.QUOTA_ENFORCEMENT_ENABLED_KEY).getValue(),Boolean.toString(true));
  assertEquals(adminClient.metadataMgmtOps.getRemoteMetadata(1,MetadataStore.QUOTA_ENFORCEMENT_ENABLED_KEY).getValue(),Boolean.toString(false));
  QuotaResetter quotaResetter=new QuotaResetter(adminClient,storeNames,cluster.getNodeIds());
  quotaResetter.rememberAndDisableQuota();
  assertEquals(Long.parseLong(adminClient.quotaMgmtOps.getQuotaForNode(STORE_NAME,QuotaType.GET_THROUGHPUT,0).getValue()),1000L);
  assertEquals(adminClient.quotaMgmtOps.getQuotaForNode(STORE_NAME,QuotaType.GET_THROUGHPUT,1),null);
  assertEquals(adminClient.metadataMgmtOps.getRemoteMetadata(0,MetadataStore.QUOTA_ENFORCEMENT_ENABLED_KEY).getValue(),Boolean.toString(false));
  assertEquals(adminClient.metadataMgmtOps.getRemoteMetadata(1,MetadataStore.QUOTA_ENFORCEMENT_ENABLED_KEY).getValue(),Boolean.toString(false));
  quotaResetter.resetQuotaAndRecoverEnforcement();
  assertEquals(Long.parseLong(adminClient.quotaMgmtOps.getQuotaForNode(STORE_NAME,QuotaType.GET_THROUGHPUT,0).getValue()),500L);
  assertEquals(Long.parseLong(adminClient.quotaMgmtOps.getQuotaForNode(STORE_NAME,QuotaType.GET_THROUGHPUT,1).getValue()),500L);
  assertEquals(adminClient.metadataMgmtOps.getRemoteMetadata(0,MetadataStore.QUOTA_ENFORCEMENT_ENABLED_KEY).getValue(),Boolean.toString(true));
  assertEquals(adminClient.metadataMgmtOps.getRemoteMetadata(1,MetadataStore.QUOTA_ENFORCEMENT_ENABLED_KEY).getValue(),Boolean.toString(false));
}
